<!doctype html>
<html lang="en">
    <head>
        <title>Demo</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

        <!-- Bootstrap CSS v5.3.2 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

        <link rel="stylesheet" type="text/css" href="viewall.css">
        
          

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.11/cropper.min.css">
  <style>
    /* Add your custom CSS styles here */
    #cropperContainer {
      width: 400px;
      height: 300px;
      margin: 20px auto;
    }
    #croppedImage {
      display: block;
      margin: 20px auto;
      max-width: 100%;
    }
    .modal {
      display: none;
    }
  </style>
</head>
<body>


  <!-- image select input -->
  <input type="file" id="imageInput" onchange="handleImageUpload(event)">
  <button onclick="openCropModal()">Crop Image</button>

  <!-- image crop modal -->
  <div id="cropModal" class="modal">
    <div id="cropperContainer"></div>
    <button onclick="cropImage()">Save Cropped Image</button>
  </div>


  <img id="croppedImage" src="" alt="Cropped Image">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.11/cropper.min.js"></script>
  <script>
    let cropper;

    function handleImageUpload(event) {
      const file = event.target.files[0];
      const reader = new FileReader();

      reader.onload = function(e) {
        const image = document.createElement('img');
        image.src = e.target.result;
        image.id = 'croppedImage';

        const cropperContainer = document.getElementById('cropperContainer');
        cropperContainer.innerHTML = '';
        cropperContainer.appendChild(image);

        cropper = new Cropper(image, {
          aspectRatio: 1, // You can set the aspect ratio as per your requirement
          viewMode: 2,
        });

        const modal = document.getElementById('cropModal');
        modal.style.display = 'block';
      }

      reader.readAsDataURL(file);
    }

    function openCropModal() {
      const fileInput = document.getElementById('imageInput');
      fileInput.click(); // Trigger file input click to open file selection dialog
    }

    function cropImage() {
      const canvas = cropper.getCroppedCanvas();
      const croppedImageData = canvas.toDataURL('image/jpeg');

      // Send cropped image data to backend
      fetch('/upload-profile-photo', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ imageData: croppedImageData }),
      })
      .then(response => {
        if (response.ok) {
          return response.json();
        }
        throw new Error('Failed to upload image');
      })
      .then(data => {
        console.log('Image uploaded successfully:', data);
        // Optionally, update UI to show uploaded image or other feedback
      })
      .catch(error => {
        console.error('Error uploading image:', error);
        // Optionally, show error message or handle error
      });

      const modal = document.getElementById('cropModal');
      modal.style.display = 'none';
    }
  </script>


        

        






                
        <!-- fontawesome cdn -->
        <script src="https://kit.fontawesome.com/9564e7a316.js" crossorigin="anonymous"></script>

        <!-- Bootstrap JavaScript Libraries -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>


    </body>
</html>